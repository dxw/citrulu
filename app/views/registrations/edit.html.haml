%header.page-header 
  %h1 Account Settings
= devise_error_messages!

= form_for(resource, :as => resource_name, :url => registration_path(resource_name), :html => { :method => :put, :class => "form-horizontal" }) do |f|
  %ul.unstyled
    %li.control-group
      = f.label :email, :class => 'control-label'
      .controls
        = f.email_field :email
  
    %li.control-group 
      = f.label :password, :class => 'control-label'
      .controls
        = f.password_field :password
        = f.password_field :password_confirmation, :placeholder => "Confirm Password"
        %p.help-block Leave blank if you don't want to change it
        
    %li.control-group 
      = f.label :email_preference, :class => 'control-label'
      .controls  
        %label.checkbox
          =f.check_box :email_preference
          If this box is ticked, you'll receive an email every time a test run has failed tests.    
        
    %li.control-group 
      = f.label :current_password, :class => 'control-label'
      .controls
        = f.password_field :current_password
        %p.help-block We need your current password to confirm any changes.

  .form-actions
    = f.submit "Update", :class => "btn btn-primary"


%h3 Terminate my account
%p
  Unhappy? You can terminate your account at any time, and we'll do our best to delete everything. If you terminate your account, we will not be able to recover it.
%p
  = link_to "Terminate my account", registration_path(resource_name), :confirm => "Are you sure? You can't recover your account once it's gone.", :method => :delete, :class => "btn btn-danger"
%p
  = link_to "Back", :back
